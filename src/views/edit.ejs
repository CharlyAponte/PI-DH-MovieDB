<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="/css/edit.css">

<%- include('./partials/head.ejs') %>

  <body>
    <%- include('./partials/header.ejs') %>

      <main class="form_main_container">
        <section class="form_section_container">
          <h2>Editar película: </h2>
          <article class="form_article_container">
            <form action="/movies/edit/<%= movie.id %>?_method=PUT" method="POST">
              <div>
                <label for="title">Titulo:</label>
                <input type="text" name="title" id="title" value="<%= movie.title %>" />
                <% if (locals.errors && errors.title) { %>
                  <p class="text">
                    <%= errors.title.msg %>
                  </p>
                  <% } %>
              </div>
              <div>
                <label for="rating">Rating:</label>
                <input type="number" name="rating" id="rating" value="<%= movie.rating %> " />
                <% if (locals.errors && errors.title) { %>
                  <p class="text">
                    <%= errors.title.msg %>
                  </p>
                  <% } %>
              </div>
              <div>
                <label for="awards">Premios:</label>
                <input type="number" name="awards" id="awards" value="<%= movie.awards%> " />
                <% if (locals.errors && errors.title) { %>
                  <p class="text">
                    <%= errors.title.msg %>
                  </p>
                  <% } %>
              </div>
              <div>
                <label for="release_date">Fecha de estreno:</label>
                <input type="date" name="release_date" id="release_date"
                  value="<%= movie.release_date.toLocaleDateString('es-US')%>" autocomplete="on" />
                <% if (locals.errors && errors.title) { %>
                  <p class="text">
                    <%= errors.title.msg %>
                  </p>
                  <% } %>
              </div>
              <div>
                <label for="length">Duración:</label>
                <input type="number" name="length" id="length" value="<%= movie.length %> " />
                <% if (locals.errors && errors.title) { %>
                  <p class="text">
                    <%= errors.title.msg %>
                  </p>
                  <% } %>
              </div>
              <div class="generos_actores">
                <div>
                  <label for="">Género:</label>
                  <select name="generos" id="genre">
                    <% for (let i=0; i < genre.length; i++) { %>
                      <% if (genre[i].id==movie.genre_id) { %>
                        <option value="<%= genre[i].id %>" selected>
                          <%= genre[i].name %>
                        </option>
                        <% } else { %>
                          <option value="<%= genre[i].id %>">
                            <%= genre[i].name %>
                          </option>
                          <% } %>
                            <% } %>
                  </select>
                </div>

              </div>
              <div class="botones">
                <input type="submit" value="Guardar cambios">
                <a class="botonHome" href="/">Home</a>
              </div>
            </form>
        </section>
        <%- include('./partials/footer.ejs') %>
  </body>

</html>